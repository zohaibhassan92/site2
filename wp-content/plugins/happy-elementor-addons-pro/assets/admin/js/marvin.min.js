!function(){"use strict";function e(){return elementorCommon&&elementorCommon.helpers&&elementor.helpers.CommongetUniqueId||elementor.helpers.getUniqueID}function t(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function n(e,n){if(!t(e,n))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!function(e){e(window).on("elementor/frontend/init",function(){if(window.elementor){var t=elementor.hooks.addFilter,n=a?new p(marvin.storageKey,"https://happymonster.dev/storage/safari.php",e):new l(marvin.storageKey),i=new u(n);t("elements/widget/contextMenuGroups",function(e,t){return r.prepare(e,t,i)}),t("elements/section/contextMenuGroups",function(e,t){return r.prepare(e,t,i,!1)}),t("elements/column/contextMenuGroups",function(e,t){return r.prepare(e,t,i,!0)}),t("element/view",function(e,t,n){var o;return"column"===t.get("elType")?e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments),o=this},emptyView:e.prototype.emptyView.extend({getContextMenuGroups:function(){var t=e.prototype.emptyView.prototype.getContextMenuGroups.apply(this,arguments);return r.prepareForBlankColumn(t,o,i)}})}):e})}})}(jQuery);var r=function(){function e(){n(this,e)}return o(e,null,[{key:"prepare",value:function(e,t,n,i){return e.push({name:"x-domain",actions:[{name:"x-copy",title:"X Copy",shortcut:'<i class="hm hm-happyaddons"></i>',callback:function(){var e=new c(t.model.get("widgetType"),t.model.toJSON({copyHtmlCache:!0}));n.copy(e)}},{name:"x-paste",title:"X Paste",shortcut:'<i class="hm hm-happyaddons"></i>',callback:function(){n.paste(t,i)}},{name:"live-paste",title:"Live Paste",shortcut:'<i class="hm hm-happyaddons"></i>',callback:function(){n.paste(t,i)}}]}),e}},{key:"prepareForBlankColumn",value:function(e,t,n){return e[0].actions.push({name:"x-paste",title:"X Paste",shortcut:'<i class="hm hm-happyaddons"></i>',callback:function(){n.paste(t,!0)},isEnabled:function(){return!0}}),e[0].actions.push({name:"live-paste",title:"Live Paste",shortcut:'<i class="hm hm-happyaddons"></i>',callback:function(){n.paste(t,!0)},isEnabled:function(){return!0}}),e[0].actions.push({name:"x-insert",title:"Insert Blank Section",shortcut:'<i class="hm hm-happyaddons"></i>',callback:function(){s.insert(t)},isEnabled:function(){return!0}}),e}}]),e}(),s=function(){function t(){n(this,t)}return o(t,null,[{key:"insert",value:function(t){elementor.channels.data.trigger("element:before:add",{elType:"section"}),t.addChildElement({id:e(),elType:"section",settings:{},elements:[]},{edit:!0}),elementor.channels.data.trigger("element:after:add")}}]),t}(),c=function(){function e(t,i){n(this,e),this.widgetType=t,this.widgetCode=i}return o(e,[{key:"getWidgetType",value:function(){return this.widgetType}},{key:"getWidgetCode",value:function(){return this.widgetCode}},{key:"toJSON",value:function(){return{widgetType:this.widgetType,widgetCode:this.widgetCode}}}]),e}(),u=function(){function e(t){n(this,e),this.widgetStorage=t}return o(e,[{key:"copy",value:function(e){this.widgetStorage.save(e)}},{key:"paste",value:function(e,t){this.widgetStorage.fetch(function(n){var i=JSON.stringify(n.getWidgetCode()).replace('.png","id":','.png","id":xLock').replace('.jpg","id":','.jpg","id":xLock').replace('.gif","id":','.gif","id":xLock').replace('.jpeg","id":','.jpeg","id":xLock').replace('.svg","id":','.svg","id":xLock').replace(/xLock([\d]+)/g,'"x$1"');if(e.startTransport("copy"),elementorFrontend.storage.set("transfer",{type:"copy",elementsType:n.getWidgetType(),elements:[JSON.parse(i)]}),t){var o=e,a=elementorFrontend.storage.get("transfer").elements,r=0;a.forEach(function(e){o.addChildElement(e,{at:r,clone:!0}),r++})}else e.trigger("request:paste")})}}]),e}(),l=function(){function e(t){n(this,e),this.storageKey=t,xdLocalStorage.init({iframeUrl:"https://happyaddons.com/marvin/index.html",initCallback:function(){}})}return o(e,[{key:"save",value:function(e){xdLocalStorage.setItem(this.storageKey,JSON.stringify(e))}},{key:"fetch",value:function(e){return xdLocalStorage.getItem(this.storageKey,function(t){var n=JSON.parse(t.value),i=new c(n.widgetType,n.widgetCode);e(i)})}}]),e}(),p=function(){function e(t,i,o){n(this,e),this.storageKey=t,this.storageEndpoint=i,this.$=o}return o(e,[{key:"save",value:function(e){this.$.post(this.storageEndpoint,{key:this.storageKey,data:JSON.stringify(e)})}},{key:"fetch",value:function(e){this.$.get(this.storageEndpoint,{key:this.storageKey},function(t){var n=JSON.parse(t),i=new c(n.widgetType,n.widgetCode);e(i)})}}]),e}();window.HWidgetStorage=l,window.HSWidgetStorage=p,window.HClipBoard=u,window.HWidget=c}();