!function(e){"use strict";e(window).on("elementor:init",function(){var t=elementor.modules.controls.BaseData.extend({isControlReady:!1,prepareQueryArgs:function(){var e=this,t=e.model.get("lazy_args");return _.isObject(t)||(t={}),t.widget_props&&_.isObject(t.widget_props)&&_.each(t.widget_props,function(n,s){t[s]=e.container.settings.get(n)}),t},getQueryArgs:function(){var t=e.extend({},this.prepareQueryArgs());return delete t.widget_props,t},getTitlesByIDs:function(){var t=this,n=this.getControlValue();if(n&&!(n.length<1)){_.isArray(n)||(n=[n]);var s={nonce:ha_lazy.nonce,action:ha_lazy.action,ids:n};e.ajax({url:ha_lazy.ajax_url,type:"POST",data:e.extend({},s,this.getQueryArgs()),before:t.addControlSpinner(),success:function(e){e.success||console.log("something went wrong!",e.data);var n={};t.isControlReady=!0,_.each(e.data,function(e){n[e.id]=e.text}),t.model.set("options",n),t.render()}})}},addControlSpinner:function(){this.ui.select.prop("disabled",!0),this.$el.find(".elementor-control-title").after('<span class="elementor-control-spinner">&nbsp;<i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>')},onReady:function(){var t=this;this.ui.select.select2({placeholder:t.model.get("placeholder")?t.model.get("placeholder"):"Type & search",minimumInputLength:t.model.get("mininput")?t.model.get("mininput"):1,allowClear:!0,ajax:{url:ha_lazy.ajax_url,dataType:"json",method:"post",delay:250,data:function(n){var s={nonce:ha_lazy.nonce,action:ha_lazy.action,search_term:n.term};return e.extend({},s,t.getQueryArgs())},processResults:function(e){return e.success&&e.data?{results:e.data}:(console.log("something went wrong!",e.data),{results:[{id:-1,text:"No results found",disabled:!0}]})},cache:!0}}),this.isControlReady||this.getTitlesByIDs()},onBeforeDestroy:function(){this.ui.select.data("select2")&&this.ui.select.select2("destroy"),this.$el.remove()}});elementor.addControlView("ha-lazy-select",t)})}(jQuery);