!function(e){"use strict";function t(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function n(e,n){if(!t(e,n))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var a=function(){function e(t,o){n(this,e),this.widgetType=t,this.widgetCode=o}return i(e,[{key:"getWidgetType",value:function(){return this.widgetType}},{key:"getWidgetCode",value:function(){return this.widgetCode}},{key:"toJSON",value:function(){return{widgetType:this.widgetType,widgetCode:this.widgetCode}}}]),e}(),r=function(){function e(t){n(this,e),this.widgetStorage=t}return i(e,[{key:"copy",value:function(e){this.widgetStorage.save(e)}}]),e}(),s=function(){function e(t){n(this,e),this.storageKey=t,xdLocalStorage.init({iframeUrl:"https://happyaddons.com/marvin/index.html",initCallback:function(){}})}return i(e,[{key:"save",value:function(e){xdLocalStorage.setItem(this.storageKey,JSON.stringify(e))}},{key:"fetch",value:function(e){return xdLocalStorage.getItem(this.storageKey,function(t){var n=JSON.parse(t.value),o=new a(n.widgetType,n.widgetCode);e(o)})}}]),e}(),c=function(){function e(t,o,i){n(this,e),this.storageKey=t,this.storageEndpoint=o,this.$=i}return i(e,[{key:"save",value:function(e){this.$.post(this.storageEndpoint,{key:this.storageKey,data:JSON.stringify(e)})}},{key:"fetch",value:function(e){this.$.get(this.storageEndpoint,{key:this.storageKey},function(t){var n=JSON.parse(t),o=new a(n.widgetType,n.widgetCode);e(o)})}}]),e}();e(window).on("elementor/frontend/init",function(){var t=e("#ha-live-copy-base"),n=t.clone().removeAttr("id").removeAttr("style"),o=e(".elementor-section-wrap > .elementor-section"),i=e("body").hasClass("elementor-editor-active"),d=e(document);i||o.filter(function(t,n){var o=e(n),i=o.data("settings");return i&&i._ha_enable_live_copy&&"yes"===i._ha_enable_live_copy}).append(n),o.on("click.HappyAddonsLiveCopy",".ha-live-copy-btn",function(t){t.preventDefault();var n=e(t.delegateTarget).data(),o=e(this),i=o.parents("[data-elementor-id]").data("elementor-id");o.hasClass("on-progress")||"section"===n.element_type&&(d.trigger({type:"onHappyAddonsLiveCopy",sectionId:n.id,postID:i}),o.addClass("on-progress"))});var u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=u?new c(livecopy.storagekey,"https://happymonster.dev/storage/safari.php",e):new s(livecopy.storagekey),p=new r(l);d.on("onHappyAddonsLiveCopy",function(t){var n=e('[data-id="'+t.sectionId+'"] .ha-live-copy-btn');n.css("cursor","progress"),e.get(livecopy.ajax_url,{action:"get_section_data",section_id:t.sectionId,post_id:t.postID,nonce:livecopy.nonce}).done(function(e){if(!e.success)return void console.log("Something is wrong!");var t=new a("section",e.data);p.copy(t);var o=setTimeout(function(){n.removeAttr("style").text("Copied").removeClass("on-progress"),clearTimeout(o);var e=setTimeout(function(){n.text("Live Copy"),clearTimeout(e)},1e3)},500)})})})}(jQuery);